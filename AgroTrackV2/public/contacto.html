<!-- ========================================
     P츼GINA DE CONTACTO AGROTRACK
     ========================================
     Esta p치gina permite a los empleados enviar consultas y comunicarse
     con el equipo interno de AgroTrack.
-->

<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Configuraci칩n b치sica de la p치gina -->
    <meta charset="UTF-8">  <!-- Codificaci칩n de caracteres para que se vean bien las tildes -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  <!-- Para que se vea bien en m칩viles -->
    <title>Contacto - AgroTrack</title>  <!-- El t칤tulo que aparece en la pesta침a del navegador -->
    
    <!-- Conectamos el archivo de estilos CSS -->
    <link rel="stylesheet" href="/estilos.css">
</head>
<body>
    <!-- Contenedor principal que envuelve todo el contenido -->
    <div class="container">
        
        <!-- ========================================
             ENCABEZADO (HEADER)
             ========================================
             Ac치 est치 el t칤tulo principal y la navegaci칩n
        -->
        <header>
            <!-- El t칤tulo principal de la empresa -->
            <h1>AgroTrack</h1>
            
            <!-- El subt칤tulo que explica qu칠 es el portal -->
            <p class="subtitle">Portal Interno Agroindustrial</p>
            
            <!-- La barra de navegaci칩n con los links principales -->
            <nav>
                <!-- Link a la p치gina principal -->
                <a href="/">Inicio</a>
                
                <!-- Link a la p치gina de productos -->
                <a href="/productos.html">Productos</a>
                
                <!-- Link a la p치gina actual (por eso tiene la clase "active") -->
                <a href="/contacto.html" class="active">Contacto</a>
                
                <!-- Link al formulario de login -->
                <a href="/login.html">Login</a>
            </nav>
        </header>
        
        <!-- ========================================
             CONTENIDO PRINCIPAL (MAIN)
             ========================================
             Ac치 est치 todo el contenido de la p치gina
        -->
        <main>
            
            <!-- Encabezado de la p치gina con t칤tulo y descripci칩n -->
            <section class="page-header">
                <!-- T칤tulo principal de la p치gina -->
                <h2>Contacto Interno</h2>
                
                <!-- Descripci칩n de qu칠 pueden hacer -->
                <p>Env칤a tu consulta o sugerencia al equipo de AgroTrack</p>
            </section>
            
            <!-- ========================================
                 FORMULARIO DE CONTACTO
                 ========================================
                 Ac치 est치 el formulario que permite enviar consultas
            -->
            <section class="contact-form">
                <!-- 
                    El formulario env칤a los datos por POST a /contacto/cargar
                    que es la ruta que procesa las consultas en el servidor
                -->
                <form id="contactForm" action="/api/contactos" method="POST">
                    
                    <!-- Campo 1: Nombre completo -->
                    <div class="form-group">
                        <!-- Etiqueta del campo -->
                        <label for="nombre">Nombre completo:</label>
                        
                        <!-- Campo de entrada de texto -->
                        <input type="text" id="nombre" name="nombre" required>
                        <!-- 
                            required = campo obligatorio
                            name="nombre" = nombre del campo que se env칤a al servidor
                        -->
                    </div>
                    
                    <!-- Campo 2: Correo electr칩nico -->
                    <div class="form-group">
                        <!-- Etiqueta del campo -->
                        <label for="email">Correo electr칩nico:</label>
                        
                        <!-- Campo de entrada de email -->
                        <input type="email" id="email" name="email" required>
                        <!-- 
                            type="email" = valida que sea un email v치lido
                            required = campo obligatorio
                            name="email" = nombre del campo que se env칤a al servidor
                        -->
                    </div>
                    
                    <!-- Campo 3: Mensaje -->
                    <div class="form-group">
                        <!-- Etiqueta del campo -->
                        <label for="mensaje">Mensaje:</label>
                        
                        <!-- 츼rea de texto para mensajes largos -->
                        <textarea id="mensaje" name="mensaje" rows="5" required placeholder="Escribe tu consulta o sugerencia aqu칤..."></textarea>
                        <!-- 
                            rows="5" = altura inicial del 치rea de texto
                            required = campo obligatorio
                            name="mensaje" = nombre del campo que se env칤a al servidor
                            placeholder = texto de ayuda que aparece cuando est치 vac칤o
                        -->
                    </div>
                    
                    <!-- Botones de acci칩n del formulario -->
                    <div class="form-actions">
                        <!-- Bot칩n para enviar el formulario -->
                        <button type="submit" class="btn">Enviar Consulta</button>
                        
                        <!-- Bot칩n para limpiar todos los campos -->
                        <button type="reset" class="btn btn-secondary">Limpiar</button>
                    </div>
                    <!-- Mensajes de estado -->
                    <div id="formStatus" class="form-status" aria-live="polite"></div>
                </form>
            </section>
            
            <!-- ========================================
                 INFORMACI칍N DE CONTACTO
                 ========================================
                 Ac치 est치 la informaci칩n de contacto de la empresa
            -->
            <section class="contact-info">
                <!-- T칤tulo de la secci칩n -->
                <h3>Informaci칩n de Contacto</h3>
                
                <!-- Contenedor de las tarjetas de informaci칩n -->
                <div class="contact-details">
                    
                    <!-- Tarjeta 1: Email corporativo -->
                    <div class="contact-item">
                        <!-- T칤tulo con emoji -->
                        <h4>游닎 Email Corporativo</h4>
                        
                        <!-- Direcci칩n de email -->
                        <p>contacto@agrotrack.com</p>
                    </div>
                    
                    <!-- Tarjeta 2: Tel칠fono -->
                    <div class="contact-item">
                        <!-- T칤tulo con emoji -->
                        <h4>游 Tel칠fono</h4>
                        
                        <!-- N칰mero de tel칠fono -->
                        <p>+54 11 1234-5678</p>
                    </div>
                    
                    <!-- Tarjeta 3: Direcci칩n -->
                    <div class="contact-item">
                        <!-- T칤tulo con emoji -->
                        <h4>游늸 Direcci칩n</h4>
                        
                        <!-- Direcci칩n f칤sica -->
                        <p>Av. Industrial 1234<br>Buenos Aires, Argentina</p>
                        <!-- <br> = salto de l칤nea -->
                    </div>
                </div>
            </section>
            
            <!-- ========================================
                 ACCIONES R츼PIDAS
                 ========================================
                 Botones para acciones comunes
            -->
            <section class="quick-actions">
                <!-- T칤tulo de la secci칩n -->
                <h3>Acciones R치pidas</h3>
                
                <!-- Contenedor de los botones -->
                <div class="action-buttons">
                    <!-- Bot칩n para ver todas las consultas enviadas -->
                    <a href="/consultas.html" class="btn btn-secondary">Ver Consultas Enviadas</a>
                    
                    <!-- Bot칩n para ir a la p치gina de productos -->
                    <a href="/productos.html" class="btn btn-secondary">Ver Productos</a>
                </div>
            </section>
        </main>
        
        <!-- ========================================
             PIE DE P츼GINA (FOOTER)
             ========================================
             Ac치 est치 la informaci칩n de copyright
        -->
        <footer>
            <!-- Texto de copyright -->
            <p>&copy; 2025 AgroTrack. Portal Interno - Todos los derechos reservados.</p>
        </footer>
    </div>
</body>
</html>

<script>
(function() {
    const form = document.getElementById('contactForm');
    const statusBox = document.getElementById('formStatus');

    if (!form || !statusBox) return;

    form.addEventListener('submit', async function(event) {
        event.preventDefault();
        statusBox.textContent = 'Enviando consulta...';
        statusBox.className = 'form-status info';

        const formData = new FormData(form);
        const payload = {
            nombre: formData.get('nombre'),
            email: formData.get('email'),
            mensaje: formData.get('mensaje')
        };

        try {
            const response = await fetch('/api/contactos', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            });

            const result = await response.json();

            if (!response.ok) {
                throw new Error(result?.errors?.join(', ') || result?.message || 'Error desconocido');
            }

            statusBox.textContent = '춰Consulta enviada con 칠xito!';
            statusBox.className = 'form-status success';
            form.reset();
        } catch (error) {
            statusBox.textContent = `No se pudo enviar la consulta: ${error.message}`;
            statusBox.className = 'form-status error';
        }
    });
})();
</script>